CREATE TABLE products (
    id INT PRIMARY KEY,
    name VARCHAR(255),
    category VARCHAR(255),
    code VARCHAR(50) UNIQUE,
    cost DECIMAL(10,2),
    retail_price DECIMAL(10,2),
    stock_threshold INT -- Used to trigger restock alert
);

CREATE TABLE inventory (
    id INT PRIMARY KEY,
    product_id INT,
    change_amount INT, -- Positive is restock, negative is sale
    transaction_type ENUM('sale', 'restock'),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    batch_id INT,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (batch_id) REFERENCES product_batches(batch_id)
);

CREATE TABLE product_batches (
    batch_id INT PRIMARY KEY AUTO_INCREMENT,
    product_id INT,
    quantity INT,
    expiry_date DATE,
    received_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);


supplier_products
------------------------
id (PK)
supplier_id (FK to users/suppliers)
name
category
code
cost
quantity_available
created_at

purchase_orders
------------------------
id (PK)
supplier_id (FK to users)
order_date
status (pending, approved, shipped, received, cancelled)
total_cost

purchase_order_items
------------------------
id (PK)
purchase_order_id (FK)
supplier_product_id (FK)
quantity
unit_cost
subtotal
